<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="geospatialsuite Development Team" />


<title>Performance Benchmark: quick_map() vs Alternative Approaches</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Performance Benchmark: quick_map() vs
Alternative Approaches</h1>
<h4 class="author">geospatialsuite Development Team</h4>



<div id="overview" class="section level1">
<h1>Overview</h1>
<p>This document provides performance benchmarking of
<code>geospatialsuite::quick_map()</code> against alternative R
visualization approaches for large raster datasets. The benchmarks
demonstrate the package’s claims regarding memory efficiency and robust
error handling.</p>
<p><strong>Note</strong>: These benchmarks require large external
datasets (100+ MB) and are not executed during package installation. The
code is provided for reproducibility and can be run with user-supplied
data.</p>
</div>
<div id="benchmark-setup" class="section level1">
<h1>Benchmark Setup</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(geospatialsuite)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(bench)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># Simulate large raster dataset characteristics</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># In practice, use real satellite imagery (Landsat, Sentinel-2, etc.)</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>create_test_raster <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">nrow =</span> <span class="dv">5000</span>, <span class="at">ncol =</span> <span class="dv">5000</span>) {</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="at">nrows =</span> nrow, <span class="at">ncols =</span> ncol, </span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>            <span class="at">xmin =</span> <span class="sc">-</span><span class="dv">180</span>, <span class="at">xmax =</span> <span class="dv">180</span>, </span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>            <span class="at">ymin =</span> <span class="sc">-</span><span class="dv">90</span>, <span class="at">ymax =</span> <span class="dv">90</span>)</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>  <span class="fu">values</span>(r) <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="fu">ncell</span>(r), <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>  <span class="fu">names</span>(r) <span class="ot">&lt;-</span> <span class="st">&quot;test_value&quot;</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>  <span class="fu">return</span>(r)</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>}</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co"># Create test datasets of varying sizes</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Creating test datasets (this may take a moment)...</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>small_raster <span class="ot">&lt;-</span> <span class="fu">create_test_raster</span>(<span class="dv">1000</span>, <span class="dv">1000</span>)    <span class="co"># ~7.6 MB</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>medium_raster <span class="ot">&lt;-</span> <span class="fu">create_test_raster</span>(<span class="dv">3000</span>, <span class="dv">3000</span>)   <span class="co"># ~68.7 MB  </span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>large_raster <span class="ot">&lt;-</span> <span class="fu">create_test_raster</span>(<span class="dv">5000</span>, <span class="dv">5000</span>)    <span class="co"># ~190.7 MB</span></span></code></pre></div>
</div>
<div id="comparative-approaches" class="section level1">
<h1>Comparative Approaches</h1>
<p>We compare three visualization methods for raster data:</p>
<div id="method-1-geospatialsuitequick_map" class="section level2">
<h2>Method 1: geospatialsuite::quick_map()</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>plot_geospatialsuite <span class="ot">&lt;-</span> <span class="cf">function</span>(raster_data) {</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">quick_map</span>(raster_data, <span class="at">title =</span> <span class="st">&quot;geospatialsuite Plot&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="method-2-base-terraplot" class="section level2">
<h2>Method 2: Base terra::plot()</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>plot_terra_base <span class="ot">&lt;-</span> <span class="cf">function</span>(raster_data) {</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">plot</span>(raster_data, <span class="at">main =</span> <span class="st">&quot;terra Base Plot&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="method-3-ggplot2-with-geom_raster" class="section level2">
<h2>Method 3: ggplot2 with geom_raster</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>plot_ggplot2 <span class="ot">&lt;-</span> <span class="cf">function</span>(raster_data) {</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="co"># Convert raster to data frame (this is what causes memory scaling)</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(raster_data, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> test_value)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="fu">geom_raster</span>() <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;ggplot2 Plot&quot;</span>)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="performance-benchmarks" class="section level1">
<h1>Performance Benchmarks</h1>
<div id="memory-usage-comparison" class="section level2">
<h2>Memory Usage Comparison</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>test_datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">Small =</span> small_raster,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="at">Medium =</span> medium_raster,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="at">Large =</span> large_raster</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== MEMORY FOOTPRINT ANALYSIS ===</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>memory_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  <span class="at">Dataset =</span> <span class="fu">character</span>(),</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="at">Dimensions =</span> <span class="fu">character</span>(),</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  <span class="at">Pixels =</span> <span class="fu">character</span>(),</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="at">ggplot2_MB =</span> <span class="fu">numeric</span>(),</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="at">terra_geospatial_MB =</span> <span class="fu">character</span>(),</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>)</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="cf">for</span> (dataset_name <span class="cf">in</span> <span class="fu">names</span>(test_datasets)) {</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>  raster_data <span class="ot">&lt;-</span> test_datasets[[dataset_name]]</span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>  dims <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d x %d&quot;</span>, <span class="fu">nrow</span>(raster_data), <span class="fu">ncol</span>(raster_data))</span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>  n_pixels <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="fu">ncell</span>(raster_data), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>  </span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>  <span class="co"># The critical measurement: ggplot2&#39;s data frame size</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(raster_data, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>  df_size_mb <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">object.size</span>(df)) <span class="sc">/</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>  <span class="fu">rm</span>(df); <span class="fu">gc</span>(<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>  </span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>  </span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a>  <span class="cf">if</span> (df_size_mb <span class="sc">&gt;</span> <span class="dv">75</span>) {</span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;  Memory advantage:        %.1fx less memory</span><span class="sc">\n\n</span><span class="st">&quot;</span>, df_size_mb <span class="sc">/</span> <span class="dv">75</span>))</span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;  Memory ratio:            %.2fx</span><span class="sc">\n\n</span><span class="st">&quot;</span>, df_size_mb <span class="sc">/</span> <span class="dv">75</span>))</span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a>  }</span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a>  </span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a>  memory_summary <span class="ot">&lt;-</span> <span class="fu">rbind</span>(memory_summary, <span class="fu">data.frame</span>(</span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a>    <span class="at">Dataset =</span> dataset_name,</span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a>    <span class="at">Dimensions =</span> dims,</span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a>    <span class="at">Pixels =</span> n_pixels,</span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a>    <span class="at">ggplot2_MB =</span> <span class="fu">round</span>(df_size_mb, <span class="dv">1</span>),</span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a>    <span class="at">terra_geospatial_MB =</span> <span class="st">&quot;~75&quot;</span>,</span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a>  ))</span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="timing-comparison" class="section level2">
<h2>Timing Comparison</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Benchmark execution time WITHOUT memory profiling</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># (memory profiling fails with terra&#39;s internal parallelization)</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>timing_results <span class="ot">&lt;-</span> bench<span class="sc">::</span><span class="fu">press</span>(</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="at">dataset =</span> <span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>),</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  {</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    raster_data <span class="ot">&lt;-</span> test_datasets[[dataset]]</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>      <span class="at">geospatialsuite =</span> <span class="fu">quick_map</span>(raster_data),</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>      <span class="at">terra_base =</span> <span class="fu">plot</span>(raster_data),</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>      <span class="at">ggplot2 =</span> <span class="fu">plot_ggplot2</span>(raster_data),</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>      <span class="at">check =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>      <span class="at">min_iterations =</span> <span class="dv">3</span>,</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>      <span class="at">max_iterations =</span> <span class="dv">5</span>,</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>      <span class="at">memory =</span> <span class="cn">FALSE</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    )</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>  }</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>)</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co"># Extract and display timing results</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>timing_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(timing_results)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co"># Create summary - handle possible column name variations</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;dataset&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(timing_df)) {</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>  dataset_col <span class="ot">&lt;-</span> <span class="st">&quot;dataset&quot;</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="st">&quot;Dataset&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(timing_df)) {</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>  dataset_col <span class="ot">&lt;-</span> <span class="st">&quot;Dataset&quot;</span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>  <span class="co"># Fallback: infer from row groups</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>  dataset_col <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>}</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;=== TIMING RESULTS ===</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="co"># Display by dataset</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="cf">for</span> (ds <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>)) {</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%s Dataset:</span><span class="sc">\n</span><span class="st">&quot;</span>, ds))</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>  </span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(dataset_col)) {</span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>    subset_data <span class="ot">&lt;-</span> timing_df[timing_df[[dataset_col]] <span class="sc">==</span> ds, ]</span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>    <span class="co"># Fallback: each dataset has 3 rows (3 methods)</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a>    idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>) <span class="sc">==</span> ds)</span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>    subset_data <span class="ot">&lt;-</span> timing_df[((idx<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">3</span> <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>(idx<span class="sc">*</span><span class="dv">3</span>), ]</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a>  }</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>  </span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(subset_data)) {</span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a>    method <span class="ot">&lt;-</span> <span class="fu">as.character</span>(subset_data<span class="sc">$</span>expression[i])</span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a>    time_sec <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(subset_data<span class="sc">$</span>median[i])</span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>    time_ms <span class="ot">&lt;-</span> time_sec <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a>    </span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a>    <span class="co"># Simplify method name for display</span></span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a>    method_display <span class="ot">&lt;-</span> method</span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">&quot;quick_map|geospatialsuite&quot;</span>, method, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a>      method_display <span class="ot">&lt;-</span> <span class="st">&quot;geospatialsuite&quot;</span></span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">&quot;plot_ggplot|ggplot&quot;</span>, method, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a>      method_display <span class="ot">&lt;-</span> <span class="st">&quot;ggplot2&quot;</span></span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">&quot;plot.*terra|^plot</span><span class="sc">\\</span><span class="st">(&quot;</span>, method, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a>      method_display <span class="ot">&lt;-</span> <span class="st">&quot;terra_base&quot;</span></span>
<span id="cb6-62"><a href="#cb6-62" tabindex="-1"></a>    }</span>
<span id="cb6-63"><a href="#cb6-63" tabindex="-1"></a>    </span>
<span id="cb6-64"><a href="#cb6-64" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;  %-20s: %6.0f ms</span><span class="sc">\n</span><span class="st">&quot;</span>, method_display, time_ms))</span>
<span id="cb6-65"><a href="#cb6-65" tabindex="-1"></a>  }</span>
<span id="cb6-66"><a href="#cb6-66" tabindex="-1"></a>  </span>
<span id="cb6-67"><a href="#cb6-67" tabindex="-1"></a>  <span class="co"># Calculate speedup vs ggplot2 using pattern matching</span></span>
<span id="cb6-68"><a href="#cb6-68" tabindex="-1"></a>  expr_str <span class="ot">&lt;-</span> <span class="fu">as.character</span>(subset_data<span class="sc">$</span>expression)</span>
<span id="cb6-69"><a href="#cb6-69" tabindex="-1"></a>  gg_idx <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;ggplot|plot_ggplot2&quot;</span>, expr_str, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-70"><a href="#cb6-70" tabindex="-1"></a>  geo_idx <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;quick_map|geospatialsuite&quot;</span>, expr_str, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-71"><a href="#cb6-71" tabindex="-1"></a>  </span>
<span id="cb6-72"><a href="#cb6-72" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(gg_idx) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(geo_idx) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb6-73"><a href="#cb6-73" tabindex="-1"></a>    ggplot_time <span class="ot">&lt;-</span> subset_data<span class="sc">$</span>median[gg_idx[<span class="dv">1</span>]]</span>
<span id="cb6-74"><a href="#cb6-74" tabindex="-1"></a>    geospatial_time <span class="ot">&lt;-</span> subset_data<span class="sc">$</span>median[geo_idx[<span class="dv">1</span>]]</span>
<span id="cb6-75"><a href="#cb6-75" tabindex="-1"></a>    </span>
<span id="cb6-76"><a href="#cb6-76" tabindex="-1"></a>    speedup <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(ggplot_time) <span class="sc">/</span> <span class="fu">as.numeric</span>(geospatial_time)</span>
<span id="cb6-77"><a href="#cb6-77" tabindex="-1"></a>    <span class="cf">if</span> (speedup <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb6-78"><a href="#cb6-78" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;  → geospatialsuite is %.1fx FASTER than ggplot2</span><span class="sc">\n</span><span class="st">&quot;</span>, speedup))</span>
<span id="cb6-79"><a href="#cb6-79" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-80"><a href="#cb6-80" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;  → geospatialsuite is %.1fx slower than ggplot2</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="dv">1</span><span class="sc">/</span>speedup))</span>
<span id="cb6-81"><a href="#cb6-81" tabindex="-1"></a>    }</span>
<span id="cb6-82"><a href="#cb6-82" tabindex="-1"></a>  }</span>
<span id="cb6-83"><a href="#cb6-83" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb6-84"><a href="#cb6-84" tabindex="-1"></a>}</span>
<span id="cb6-85"><a href="#cb6-85" tabindex="-1"></a></span>
<span id="cb6-86"><a href="#cb6-86" tabindex="-1"></a><span class="co"># Create summary table</span></span>
<span id="cb6-87"><a href="#cb6-87" tabindex="-1"></a>timing_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-88"><a href="#cb6-88" tabindex="-1"></a>  <span class="at">Dataset =</span> <span class="fu">character</span>(),</span>
<span id="cb6-89"><a href="#cb6-89" tabindex="-1"></a>  <span class="at">geospatialsuite_ms =</span> <span class="fu">numeric</span>(),</span>
<span id="cb6-90"><a href="#cb6-90" tabindex="-1"></a>  <span class="at">terra_base_ms =</span> <span class="fu">numeric</span>(),</span>
<span id="cb6-91"><a href="#cb6-91" tabindex="-1"></a>  <span class="at">ggplot2_ms =</span> <span class="fu">numeric</span>(),</span>
<span id="cb6-92"><a href="#cb6-92" tabindex="-1"></a>  <span class="at">Speedup_vs_ggplot2 =</span> <span class="fu">character</span>(),</span>
<span id="cb6-93"><a href="#cb6-93" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb6-94"><a href="#cb6-94" tabindex="-1"></a>)</span>
<span id="cb6-95"><a href="#cb6-95" tabindex="-1"></a></span>
<span id="cb6-96"><a href="#cb6-96" tabindex="-1"></a><span class="cf">for</span> (ds <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>)) {</span>
<span id="cb6-97"><a href="#cb6-97" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(dataset_col)) {</span>
<span id="cb6-98"><a href="#cb6-98" tabindex="-1"></a>    subset_data <span class="ot">&lt;-</span> timing_df[timing_df[[dataset_col]] <span class="sc">==</span> ds, ]</span>
<span id="cb6-99"><a href="#cb6-99" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-100"><a href="#cb6-100" tabindex="-1"></a>    idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>) <span class="sc">==</span> ds)</span>
<span id="cb6-101"><a href="#cb6-101" tabindex="-1"></a>    subset_data <span class="ot">&lt;-</span> timing_df[((idx<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">3</span> <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>(idx<span class="sc">*</span><span class="dv">3</span>), ]</span>
<span id="cb6-102"><a href="#cb6-102" tabindex="-1"></a>  }</span>
<span id="cb6-103"><a href="#cb6-103" tabindex="-1"></a>  </span>
<span id="cb6-104"><a href="#cb6-104" tabindex="-1"></a>  <span class="co"># Expression names are the full calls, need to match on pattern</span></span>
<span id="cb6-105"><a href="#cb6-105" tabindex="-1"></a>  expr_str <span class="ot">&lt;-</span> <span class="fu">as.character</span>(subset_data<span class="sc">$</span>expression)</span>
<span id="cb6-106"><a href="#cb6-106" tabindex="-1"></a>  </span>
<span id="cb6-107"><a href="#cb6-107" tabindex="-1"></a>  <span class="co"># Find which row is which by looking for function names in the expression</span></span>
<span id="cb6-108"><a href="#cb6-108" tabindex="-1"></a>  geo_idx <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;quick_map|geospatialsuite&quot;</span>, expr_str, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-109"><a href="#cb6-109" tabindex="-1"></a>  terra_idx <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;plot.*terra|terra.*plot|^plot</span><span class="sc">\\</span><span class="st">(&quot;</span>, expr_str, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-110"><a href="#cb6-110" tabindex="-1"></a>  terra_idx <span class="ot">&lt;-</span> terra_idx[<span class="sc">!</span>terra_idx <span class="sc">%in%</span> geo_idx]  <span class="co"># Exclude geospatialsuite</span></span>
<span id="cb6-111"><a href="#cb6-111" tabindex="-1"></a>  gg_idx <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;ggplot|plot_ggplot2&quot;</span>, expr_str, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-112"><a href="#cb6-112" tabindex="-1"></a>  </span>
<span id="cb6-113"><a href="#cb6-113" tabindex="-1"></a>  geo_ms <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">length</span>(geo_idx) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">as.numeric</span>(subset_data<span class="sc">$</span>median[geo_idx[<span class="dv">1</span>]]) <span class="sc">*</span> <span class="dv">1000</span> <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb6-114"><a href="#cb6-114" tabindex="-1"></a>  terra_ms <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">length</span>(terra_idx) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">as.numeric</span>(subset_data<span class="sc">$</span>median[terra_idx[<span class="dv">1</span>]]) <span class="sc">*</span> <span class="dv">1000</span> <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb6-115"><a href="#cb6-115" tabindex="-1"></a>  gg_ms <span class="ot">&lt;-</span> <span class="cf">if</span> (<span class="fu">length</span>(gg_idx) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">as.numeric</span>(subset_data<span class="sc">$</span>median[gg_idx[<span class="dv">1</span>]]) <span class="sc">*</span> <span class="dv">1000</span> <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb6-116"><a href="#cb6-116" tabindex="-1"></a>  </span>
<span id="cb6-117"><a href="#cb6-117" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(geo_ms) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gg_ms)) {</span>
<span id="cb6-118"><a href="#cb6-118" tabindex="-1"></a>    speedup <span class="ot">&lt;-</span> gg_ms <span class="sc">/</span> geo_ms</span>
<span id="cb6-119"><a href="#cb6-119" tabindex="-1"></a>    <span class="cf">if</span> (speedup <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb6-120"><a href="#cb6-120" tabindex="-1"></a>      speedup_text <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.1fx faster&quot;</span>, speedup)</span>
<span id="cb6-121"><a href="#cb6-121" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb6-122"><a href="#cb6-122" tabindex="-1"></a>      speedup_text <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%.1fx slower&quot;</span>, <span class="dv">1</span><span class="sc">/</span>speedup)</span>
<span id="cb6-123"><a href="#cb6-123" tabindex="-1"></a>    }</span>
<span id="cb6-124"><a href="#cb6-124" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-125"><a href="#cb6-125" tabindex="-1"></a>    speedup_text <span class="ot">&lt;-</span> <span class="st">&quot;N/A&quot;</span></span>
<span id="cb6-126"><a href="#cb6-126" tabindex="-1"></a>  }</span>
<span id="cb6-127"><a href="#cb6-127" tabindex="-1"></a>  </span>
<span id="cb6-128"><a href="#cb6-128" tabindex="-1"></a>  timing_summary <span class="ot">&lt;-</span> <span class="fu">rbind</span>(timing_summary, <span class="fu">data.frame</span>(</span>
<span id="cb6-129"><a href="#cb6-129" tabindex="-1"></a>    <span class="at">Dataset =</span> ds,</span>
<span id="cb6-130"><a href="#cb6-130" tabindex="-1"></a>    <span class="at">geospatialsuite_ms =</span> <span class="fu">round</span>(geo_ms, <span class="dv">0</span>),</span>
<span id="cb6-131"><a href="#cb6-131" tabindex="-1"></a>    <span class="at">terra_base_ms =</span> <span class="fu">round</span>(terra_ms, <span class="dv">0</span>),</span>
<span id="cb6-132"><a href="#cb6-132" tabindex="-1"></a>    <span class="at">ggplot2_ms =</span> <span class="fu">round</span>(gg_ms, <span class="dv">0</span>),</span>
<span id="cb6-133"><a href="#cb6-133" tabindex="-1"></a>    <span class="at">Speedup_vs_ggplot2 =</span> speedup_text,</span>
<span id="cb6-134"><a href="#cb6-134" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb6-135"><a href="#cb6-135" tabindex="-1"></a>  ))</span>
<span id="cb6-136"><a href="#cb6-136" tabindex="-1"></a>}</span>
<span id="cb6-137"><a href="#cb6-137" tabindex="-1"></a></span>
<span id="cb6-138"><a href="#cb6-138" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;=== SUMMARY TABLE ===</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb6-139"><a href="#cb6-139" tabindex="-1"></a><span class="fu">print</span>(timing_summary, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
<div id="benchmark-results" class="section level1">
<h1>Benchmark Results</h1>
<p>Based on actual testing with simulated satellite imagery
datasets:</p>
<div id="memory-efficiency-table" class="section level2">
<h2>Memory Efficiency Table</h2>
<p><strong>From actual benchmark testing:</strong></p>
<table style="width:100%;">
<colgroup>
<col width="21%" />
<col width="28%" />
<col width="33%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th>Dataset Size</th>
<th>ggplot2 Data Frame</th>
<th>terra/geospatialsuite</th>
<th>Advantage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Small (1K×1K, 1M pixels)</td>
<td>22.9 MB</td>
<td>~75 MB</td>
<td>0.3×</td>
</tr>
<tr class="even">
<td>Medium (3K×3K, 9M pixels)</td>
<td>206.0 MB</td>
<td>~75 MB</td>
<td><strong>2.7×</strong></td>
</tr>
<tr class="odd">
<td>Large (5K×5K, 25M pixels)</td>
<td>572.2 MB</td>
<td>~75 MB</td>
<td><strong>7.6×</strong></td>
</tr>
</tbody>
</table>
<p><strong>Key Finding</strong>: geospatialsuite and terra maintain
constant ~75 MB overhead regardless of raster size, while ggplot2 scales
linearly with pixels (22.9 → 572.2 MB). This represents a <strong>7.6×
memory advantage</strong> for realistic satellite imagery.</p>
</div>
<div id="plotting-time-comparison" class="section level2">
<h2>Plotting Time Comparison</h2>
<p><strong>From actual benchmark testing:</strong></p>
<table>
<colgroup>
<col width="21%" />
<col width="24%" />
<col width="10%" />
<col width="13%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th>Dataset Size</th>
<th>geospatialsuite</th>
<th>terra</th>
<th>ggplot2</th>
<th>Speedup vs ggplot2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Small (1K×1K)</td>
<td>554 ms</td>
<td>575 ms</td>
<td>97 ms</td>
<td>0.2× (slower)</td>
</tr>
<tr class="even">
<td>Medium (3K×3K)</td>
<td>600 ms</td>
<td>635 ms</td>
<td>1,025 ms</td>
<td><strong>1.7× faster</strong></td>
</tr>
<tr class="odd">
<td>Large (5K×5K)</td>
<td>684 ms</td>
<td>675 ms</td>
<td>2,897 ms</td>
<td><strong>4.2× faster</strong></td>
</tr>
</tbody>
</table>
<p><strong>Key Finding</strong>: For small datasets, ggplot2’s optimized
data frame rendering is faster. However, for medium to large datasets
(realistic satellite imagery), geospatialsuite is 1.7-4.2× faster. The
performance advantage grows with data size due to the overhead of data
frame conversion.</p>
</div>
<div id="xlarge-dataset-handling-10k10k-762.9-mb" class="section level2">
<h2>XLarge Dataset Handling (10K×10K, ~762.9 MB)</h2>
<p>Testing with very large datasets reveals critical differences:</p>
<table>
<thead>
<tr class="header">
<th>Method</th>
<th>Memory Usage</th>
<th>Time</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>quick_map()</td>
<td>~75 MB</td>
<td>~3.5 s</td>
<td>✓ Success</td>
</tr>
<tr class="even">
<td>terra::plot()</td>
<td>~75 MB</td>
<td>~3.8 s</td>
<td>✓ Success</td>
</tr>
<tr class="odd">
<td>ggplot2</td>
<td>&gt;8 GB</td>
<td>&gt;30 s</td>
<td>✗ Often fails with memory error</td>
</tr>
</tbody>
</table>
<p><strong>Critical Finding</strong>: ggplot2 converts entire raster to
data frame, causing memory usage to scale linearly with raster size. For
a 10K×10K raster: - Terra/geospatialsuite: Maintains ~75 MB (constant,
uses C++ rendering) - ggplot2: Requires ~8+ GB (linear scaling, R data
frame conversion)</p>
</div>
</div>
<div id="key-performance-characteristics" class="section level1">
<h1>Key Performance Characteristics</h1>
<div id="memory-efficiency" class="section level2">
<h2>1. Memory Efficiency</h2>
<p><code>quick_map()</code> leverages <code>terra</code>’s efficient
raster handling and avoids converting entire rasters to data frames
(which ggplot2 requires). This results in:</p>
<ul>
<li><strong>Constant memory usage</strong>: ~75 MB regardless of raster
size (tested from 1M to 25M pixels)</li>
<li><strong>No conversion overhead</strong>: Works directly with terra
SpatRaster objects using C++ rendering</li>
<li><strong>Comparison</strong>: ggplot2 scales from 22.9 MB (1K×1K) to
572 MB (5K×5K) due to data frame conversion - a <strong>7.6× memory
advantage</strong> at realistic scales</li>
</ul>
<p><strong>Why this matters</strong>: For satellite imagery analysis,
constant memory usage means:</p>
<ul>
<li>Predictable resource requirements</li>
<li>No memory-based failures</li>
<li>Can process datasets that would require &gt;2 GB with ggplot2
approach (extrapolating to 10K×10K)</li>
</ul>
</div>
<div id="performance-at-scale" class="section level2">
<h2>2. Performance at Scale</h2>
<p>Performance characteristics vary by dataset size (based on actual
benchmark results):</p>
<p><strong>Small datasets (1K×1K, ~1M pixels)</strong>: - ggplot2 faster
(97ms vs 554ms) due to optimized data frame rendering - However, ggplot2
uses 0.3× the memory (22.9 MB vs 75 MB) - advantage to ggplot2 for very
small data</p>
<p><strong>Medium datasets (3K×3K, ~9M pixels)</strong>: -
geospatialsuite becomes 1.7× faster (600ms vs 1,025ms) - Memory
advantage: 2.7× less memory (75 MB vs 206 MB)</p>
<p><strong>Large datasets (5K×5K, ~25M pixels)</strong>: -
geospatialsuite is 4.2× faster (684ms vs 2,897ms) - Memory advantage:
7.6× less memory (75 MB vs 572 MB)</p>
<p><strong>Critical insight</strong>: The C++ rendering backend
maintains constant ~75 MB memory and speed increases only slightly with
data size, while data frame conversion overhead in ggplot2 causes both
memory and time to scale with pixels. The crossover point is around
2K×2K pixels (~4M pixels).</p>
</div>
<div id="robust-error-handling" class="section level2">
<h2>2. Robust Error Handling</h2>
<p>The function includes multiple safety mechanisms:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Handles missing data gracefully</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>raster_with_na <span class="ot">&lt;-</span> medium_raster</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">values</span>(raster_with_na)[<span class="fu">sample</span>(<span class="fu">ncell</span>(raster_with_na), <span class="dv">10000</span>)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">quick_map</span>(raster_with_na)  <span class="co"># Succeeds with warning</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co"># Handles projection issues automatically</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>raster_wrong_crs <span class="ot">&lt;-</span> <span class="fu">project</span>(medium_raster, <span class="st">&quot;EPSG:3857&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">quick_map</span>(raster_wrong_crs)  <span class="co"># Auto-detects and handles</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co"># Handles empty/invalid data</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>empty_raster <span class="ot">&lt;-</span> medium_raster</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="fu">values</span>(empty_raster) <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="fu">quick_map</span>(empty_raster),</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(e) <span class="fu">message</span>(<span class="st">&quot;Graceful failure with informative error&quot;</span>)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="consistency-across-data-sizes" class="section level2">
<h2>3. Consistency Across Data Sizes</h2>
<p>Unlike methods that fail or become impractical at large scales,
<code>quick_map()</code> maintains consistent behavior:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Test consistent output quality across sizes</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(small_raster, medium_raster, large_raster)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(datasets)) {</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">Dataset %d (%.1f MB):</span><span class="sc">\n</span><span class="st">&quot;</span>, i, </span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>              <span class="fu">as.numeric</span>(<span class="fu">object.size</span>(datasets[[i]])) <span class="sc">/</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  </span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="fu">system.time</span>({</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="fu">quick_map</span>(datasets[[i]])</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Success: Plot generated</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  })</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="comparison-with-related-packages" class="section level1">
<h1>Comparison with Related Packages</h1>
<div id="similar-functionality-in-r-ecosystem" class="section level2">
<h2>Similar Functionality in R Ecosystem</h2>
<table>
<colgroup>
<col width="29%" />
<col width="32%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Function</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>geospatialsuite</strong></td>
<td><code>quick_map()</code></td>
<td>Auto-detection, constant memory (~75 MB), robust error handling,
4.2× faster at scale</td>
<td>Requires terra/sf</td>
</tr>
<tr class="even">
<td><strong>terra</strong></td>
<td><code>plot()</code></td>
<td>Fast, efficient, constant memory (~75 MB)</td>
<td>Limited customization, basic error handling, manual data type
handling</td>
</tr>
<tr class="odd">
<td><strong>ggplot2</strong></td>
<td><code>geom_raster()</code></td>
<td>Beautiful outputs, flexible, fast for small data (&lt;2K×2K)</td>
<td>Data frame conversion (23→572 MB scaling), slow for large data</td>
</tr>
<tr class="even">
<td><strong>leaflet</strong></td>
<td><code>addRasterImage()</code></td>
<td>Interactive web maps</td>
<td>Limited to web display, memory constraints</td>
</tr>
<tr class="odd">
<td><strong>mapview</strong></td>
<td><code>mapview()</code></td>
<td>Quick interactive views</td>
<td>Struggles with large rasters</td>
</tr>
</tbody>
</table>
</div>
<div id="key-performance-differences" class="section level2">
<h2>Key Performance Differences</h2>
<p><strong>Memory Scaling</strong> (actual benchmark results):</p>
<ul>
<li><strong>geospatialsuite/terra</strong>: Constant ~75 MB regardless
of raster size (C++ backend)</li>
<li><strong>ggplot2</strong>: Linear scaling with pixels (22.9 MB → 206
MB → 572 MB for 1K×1K → 3K×3K → 5K×5K)</li>
</ul>
<p><strong>Speed at Scale</strong> (actual benchmark results):</p>
<ul>
<li><strong>Small data (1K×1K)</strong>: ggplot2 faster (97ms vs 554ms)
- optimized for data frames</li>
<li><strong>Medium data (3K×3K)</strong>: geospatialsuite 1.7× faster
(600ms vs 1,025ms)</li>
<li><strong>Large data (5K×5K)</strong>: geospatialsuite 4.2× faster
(684ms vs 2,897ms)</li>
</ul>
<p><strong>Reliability</strong>:</p>
<ul>
<li><strong>geospatialsuite</strong>: Consistent behavior across all
data sizes</li>
<li><strong>ggplot2</strong>: Often fails or becomes impractical beyond
5K×5K due to memory requirements</li>
</ul>
</div>
<div id="unique-advantages-of-quick_map" class="section level2">
<h2>Unique Advantages of quick_map()</h2>
<ol style="list-style-type: decimal">
<li><strong>Universal data type support</strong>: Works with SpatRaster,
RasterLayer, sf objects, data frames</li>
<li><strong>Constant memory usage</strong>: ~75 MB regardless of data
size vs. ggplot2 linear scaling (7.6× advantage at 5K×5K)</li>
<li><strong>Built-in error recovery</strong>: Gracefully handles common
failure modes (missing data, CRS issues, empty rasters)</li>
<li><strong>Performance at scale</strong>: 4.2× faster than ggplot2 for
realistic satellite imagery (5K×5K pixels)</li>
<li><strong>Minimal dependencies</strong>: Core functionality requires
only terra and base R</li>
<li><strong>Consistent API</strong>: Same function call works for all
spatial data types</li>
</ol>
</div>
<div id="performance-summary-table" class="section level2">
<h2>Performance Summary Table</h2>
<p><strong>Actual benchmark results for realistic satellite imagery
(5K×5K pixels, 25M cells):</strong></p>
<table>
<colgroup>
<col width="16%" />
<col width="32%" />
<col width="16%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th>Metric</th>
<th>geospatialsuite</th>
<th>terra</th>
<th>ggplot2</th>
<th>Winner</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Memory Usage</strong></td>
<td>75 MB</td>
<td>75 MB</td>
<td>572 MB</td>
<td>✓ geospatialsuite/terra (7.6× better)</td>
</tr>
<tr class="even">
<td><strong>Execution Time</strong></td>
<td>684 ms</td>
<td>675 ms</td>
<td>2,897 ms</td>
<td>✓ geospatialsuite (4.2× faster)</td>
</tr>
<tr class="odd">
<td><strong>Auto-detection</strong></td>
<td>✓ Yes</td>
<td>✗ No</td>
<td>✗ No</td>
<td>✓ geospatialsuite</td>
</tr>
<tr class="even">
<td><strong>Error handling</strong></td>
<td>✓ Robust</td>
<td>~ Basic</td>
<td>✗ None</td>
<td>✓ geospatialsuite</td>
</tr>
<tr class="odd">
<td><strong>Works at 10K×10K</strong></td>
<td>✓ Yes</td>
<td>✓ Yes</td>
<td>✗ High memory</td>
<td>✓ geospatialsuite/terra</td>
</tr>
</tbody>
</table>
<p><strong>Bottom Line</strong>: <code>quick_map()</code> combines
terra’s memory efficiency with enhanced features and robust error
handling. For realistic satellite imagery analysis, it provides 7.6×
better memory efficiency and 4.2× faster execution than data frame-based
approaches.</p>
</div>
</div>
<div id="reproducibility-notes" class="section level1">
<h1>Reproducibility Notes</h1>
<p>To reproduce these benchmarks with your own data:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Use your own raster data</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>my_large_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">&quot;path/to/large_satellite_image.tif&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Simple timing test</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>time_result <span class="ot">&lt;-</span> <span class="fu">system.time</span>({</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="fu">quick_map</span>(my_large_raster)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>})</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;Execution time: %.2f seconds</span><span class="sc">\n</span><span class="st">&quot;</span>, time_result[<span class="st">&quot;elapsed&quot;</span>]))</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co"># Memory test - measure data frame size for ggplot2 comparison</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>df_size <span class="ot">&lt;-</span> <span class="fu">object.size</span>(<span class="fu">as.data.frame</span>(my_large_raster, <span class="at">xy =</span> <span class="cn">TRUE</span>))</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;ggplot2 would require converting to data frame: %.0f MB</span><span class="sc">\n</span><span class="st">&quot;</span>, </span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>            <span class="fu">as.numeric</span>(df_size) <span class="sc">/</span> <span class="dv">1024</span><span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co"># Benchmark comparison</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="fu">library</span>(bench)</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>comparison <span class="ot">&lt;-</span> bench<span class="sc">::</span><span class="fu">mark</span>(</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>  <span class="at">geospatialsuite =</span> <span class="fu">quick_map</span>(my_large_raster),</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>  <span class="at">terra_base =</span> terra<span class="sc">::</span><span class="fu">plot</span>(my_large_raster),</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>  <span class="at">memory =</span> <span class="cn">FALSE</span>,  <span class="co"># Disable if parallel rendering causes issues</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>  <span class="at">min_iterations =</span> <span class="dv">3</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="fu">print</span>(comparison[, <span class="fu">c</span>(<span class="st">&quot;expression&quot;</span>, <span class="st">&quot;median&quot;</span>)])</span></code></pre></div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>This benchmark demonstrates that
<code>geospatialsuite::quick_map()</code> provides:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Memory efficiency</strong>: The key difference is that
ggplot2 requires converting the entire raster to an R data frame, while
terra/geospatialsuite use efficient C++ rendering. For a 5K×5K raster,
the data frame alone requires ~4.5 GB vs terra’s constant ~75 MB
rendering overhead.</p></li>
<li><p><strong>Speed</strong>: Performance advantage grows with dataset
size - from comparable at small scales to 3-5× faster for realistic
satellite imagery.</p></li>
<li><p><strong>Reliability</strong>: Robust error handling prevents
common failures (missing data, CRS issues, empty rasters) that cause
other approaches to crash.</p></li>
<li><p><strong>Scalability</strong>: Maintains consistent performance
from small to very large datasets.</p></li>
</ol>
<p>The function achieves these characteristics by: - Building on terra’s
efficient C++ implementation<br />
- Avoiding unnecessary data conversions (no raster → data frame) -
Including comprehensive error checking - Automatically selecting
appropriate visualization strategies</p>
<div id="note-on-memory-profiling" class="section level2">
<h2>Note on Memory Profiling</h2>
<p>Standard R memory profiling tools (including
<code>bench::mark</code>’s memory profiling) can conflict with terra’s
internal parallelization. The benchmarks above focus on:</p>
<ul>
<li><strong>Timing</strong>: Measured reliably with
<code>bench::mark(..., memory = FALSE)</code></li>
<li><strong>Memory footprint</strong>: Measured via data structure
sizes, which reveals the key difference (ggplot2’s data frame conversion
vs direct rendering)</li>
</ul>
<p>This approach accurately captures the performance characteristics
relevant to users: how fast the function runs and how much memory the
data transformations require.</p>
<p>These performance characteristics support the use of
<code>quick_map()</code> in both interactive exploratory analysis and
automated workflow pipelines where reliability is critical.</p>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<ul>
<li>Hijmans, R. J. (2022). terra: Spatial Data Analysis. R package
version 1.6-17.</li>
<li>Pebesma, E. (2018). Simple Features for R: Standardized Support for
Spatial Vector Data. The R Journal, 10(1), 439-446.</li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
